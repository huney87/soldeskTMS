<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="gwangjae.tms.performance.dao.mapper.PerformanceMapper">
	<resultMap id="SeatMap" type="seatInfo">
		<id property="seatInfoId" column="sinfo_id"/>
		<result property="perId" column="perf_id"/>
		<result property="seatId" column="s_id"/>
		<result property="grade" column="sinfo_grade"/>
		<result property="price" column="sinfo_price"/>	
	</resultMap>
	
	<resultMap id="PerMap" type="performance">
		<id property="per_id" column="perf_id"/>
		<result property="per_title" column="perf_title"/>
	</resultMap>

	<select id="getSeats" resultMap="SeatMap">
		select * from seatinfo
	</select>

	<insert id="addSeat" parameterType="int">
		insert into seatinfo(sinfo_id,perf_id,s_id,sinfo_grade,sinfo_price)
		values(sinfo_id_seq.nextval, #{seat},1,1,1000)
	</insert>
	
	<update id="addPerDetail" parameterType="performance">
		update performances
		set perf_startdate= #{per_startDate},perf_enddate= #{per_endDate}
		where perf_id = #{per_id}
	</update>
	
	<select id="getPer" resultMap ="PerMap">
		select perf_id,perf_title from performances
		where perf_title Like '%'||#{value}||'%'
	</select>
	
	
</mapper>